<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <meta name="author" content="Maxim Sokhatsky" />
    <title>2016-01-23</title>
    <link rel="stylesheet" href="https://n2o.dev/blank.css" />
    <link rel="stylesheet" href="../../journal.css" />
    <link rel="stylesheet" href="../../black.css" />
</head>
<body>
<nav>
    <a href='../../index.html'>5HT</a>
    <a href='../index.html'>TOP</a>
    <a href='#'>2016-01-23</a>
</nav>
<main>
    <section>
        <h3>Мифы про WebSockets</h3>

 <p>Многие люди, которые хотят попробовать N2O, пишут мне о том,
    что их клиенты якобы сомневаются в том, что WebSocket протокол
    достаточно матурный и поддерживается браузерами и ИТ сообществом.
    Просят помощи в разъяснении, что к чему.</p>

 <p>Я лично никого не заствляю писать на Эрланге и
    использовать Вебсокеты, так как и так клиентов у
    меня больше чем я успеваю обслуживать. Но ко мне
    обратились очень влиятельные люди, и очень корректно
    попросили помощи в разяснении этого вопроса.</p>

  <p><b>1. WebSocket's дырявый, я читал в инетренте, что там был
    секюрити Issue, не помню какой, но мне говорил об этом
    очень влиятельный человек.</b></P>

  <p>Ни одна не технология не обходилась без секюрных заплаток.
     Люди которые обсуждают это, как правило приводят ссылки на
     эксперементальные версии протоколов HyBi, и почему-то
     никогда не приводят официальный RFC документ 6455, дата
     выпуска которого на год младше сообщений об уязвимостях.</p>

  <p><b>2. Я читал что в Зимбабве, стране стратегическом партнере
     России, вебсокеты не проксируются у мобильного оператора ZIMBCELL</b></p>

   <p>Такое могло наблюдаться только в том случае, если в
      каких-то дешевых сетях, криворукие админы, не смогли
      разобраться в топологии сети. Конечно при появлении
      Вебсокетов нужно было качать nginx модули, впиливать
      их пересобирать, но сейчас WebSocket прокси работает
      с nginx, HAProxy из коробки, я не знаю ни одного
      известного сетевого продукта, где бы не было вебсокетов.
     Если вы знаете какой-то, расскажите мне.</p>



  <p><b>3. Я слышал что WebSockets работают только по TLS, а не по TLS не работают</b></p>

  <p>Это связано с предыдущим мифом, так как некоторые сети
     могут что-то непроксировать, то люди, чтобы обойти эту
     проблему а не написать письмо на NIC, устанавливают
     wss:// по TLS, и естественно по шифрованому трафику
     ничего не проксируется и якобы обходтся мифическое ограничение.
     При этом не приводятся доказательства случаем неработоспособности Вебсокетов по зимбабвийским и приднестровским каналам.
  </p>

  <p><b>4. Если я включу TLS, чтобы работали вебсокеты, все будет очень медленно</b></p>

     <p>nginx умеет терминацию SSL, SPDY работает только по TLS,
        фейсбук перешел на TLS, гугл и все остальные, у вас 80%
        приложений в мобилке работает по TLS. Но при этом люди
        продолжают думать что SSL это меделнно, нехватает
        ресурсов, потому-то что когда-то было прочитано
        что 1.66MHz процессор с последней OpenBSD на VAX
        генерировал PKI ключи 2 дня. Я настоятельно рекомедую
        использовать TLS во всех приложениях, также рекомендует
        Илья Григорик, и это не связано с неработающими сетями
        в Приднестровье и медленными датацентрами ДНР и ЛНР.
        А связано с тем, что это позволит обеспечить хоть
        какую-то защиту данных ваших пользователей и кукисов.</p>

  <p><b>5. Я слышал что хайп по вебсокетам утих</b></p>

       <p>Хайп утих и по поводу дифференциального исчисления бесконечно малых, и быстрого преобразования Фурье. Если вы пойдете на HN то я бы не сказал что WebSocket хайп утих, возможно вцелом локальное снижение есть, но глобально технология работает даже на SDPY и будуем HTTP/2.
          Заявления о том, что Вебсокеты прекратят свое существования со дня на день примерно соотвествует заявления о том что Виндовс загнется и Майкрософт станет банкротом. Впрочем это объект обсуждения другого калифорнийского мифа, просто хипстеры Сан-Франциско не в курсе что Haskell родился в Microsoft и благодаря Microsoft.
       </p>

  <p><b>6. Никто из больших компаний не используют вебсокеты.</b></p>

                    <p>
                            Да, это правда, Google+, Facebook все это работает на XHR полинге. Но это не связано с вебсокетами, а с тем, что весь джаваскрипт этого говна генерируется фремворками, типа GWT которые были написаны задолго до Вебсокетов. Эти компании страдают от своей инертности, но при этом эти же компании проводят пиар компании
                            по популяризации SPDY, WebSockets и быстрого интернета, троля себя же и сайти монстры типа NY Times и Bloomberg. Коменты которых сервятся по XHR. Можно перечислять десятки стартапов которые использует WebSockets включая Disqus и другие, но это все делать бессмысленно, для тех кто слеп.
                        </p>


  <p><b>7. Никто не предосталяет графики нагрузочного тестирования вебсокетов.</b></p>

<p>
                            Это связано с очень плохим качеством утилит нагрузочного тестирования. Единственная утилита, написанная на С, которая может создать рельный шторм вебсерверу которой я тестировал N2O, это wrk, но она не поддерживает вебсокеты.
                            Для WebSockets существует аналогичная wrk утилита — tcpkali, с помощью которой вы легко сможете завалить свои серваки на node.js и Python.
                        </p>


  <p><b>8. Я слышал что вебсокеты медленные.</b></p>

 <p>
                            Тут тоже есть картинки. Эта картинка говорит о том, что для бизнес приложений на N2O можно рисовать мультики, которые будут показываться как видео, 50 кадров секунду,
                            причем сюда входит не только доставка сгененерированных HTML/JS форм вместе с валидациями и всем, что нужно энтерпрайзу по вебсокетам, но также сюда входит время рендеринга DOM в браузере.
                        </p>

  <p><b>9. Докажи мне, что я должен испльзовать WebSockets</b></p>

 <p>
                            Когда я начинал заниматься разработкой N2O, WebSockets их еще не было, были экспериментальные версии протоколов HyBi. Я почитал у Джо Армстронга в блоге, что Вебсокеты это круто, и ничего не знаю о вопросе решил поставить весь свой бизнес на эту технологию.
                            Пока остальные писали свои REST микро фреймворки (<a href="https://github.com/synrc/rest">которых у нас тоже в изобилии</a>), патча свои рельсы, мы вкидывались в технологию, которая еще не поддерживалась браузерами.
                        </p>

  <p><b>10. У нас умный сервер, мы его настроили чтобы он рубил вебсокеты и у нас не работают вебсокеты.</b></p>

  <p>см пункт 2.</p>

  <p><b>11. Я СТО очень большой компании и протестировал ваши вебсокеты</b></p>

<p>Для таких людей мы сделали N2O промо сайт, <a href="http://n2o.dev">n2o.dev</a>
     там вы можете попробовать зайти с любого устройства и любой сети и убедиться,
     что вебсокеты у вас работают на 80 порту. А websocket.org писали криворукие
     хипстеры из Сан-Франциско.</p>

  <p><b>Резюме</b></p>

 <p>
                            Что я хочу сказать. Не используйте вебсокеты, пишите на XHR, используйте whatever you fucking want только не говорите больше, что вы не читали этот текст.
                        </p>
                        <p>
                            Этот текст написан для лодей у кого есть мозг, чтобы услышать friendly advise.
                        </p>

   <br><center>&dot;</center>

   <div id="utterances" class="utterances" >ЕБАШИМ КАМЕНТЫ</div>
   <script src="https://utteranc.es/client.js" repo="5HT/tonpa.guru" issue-number="18" theme="github-light" crossorigin="anonymous" async> </script>

    </section>
</main>
<footer>Namdak Tonpa <span class="heart">&nbsp;❤&nbsp;</span> 2009—2019</footer>
</body>
</html>

