<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <meta name="author" content="Maxim Sokhatsky" />
    <title>2018-11-13</title>
    <link rel="stylesheet" href="https://n2o.dev/blank.css" />
    <link rel="stylesheet" href="../../journal.css" />
</head>
<body>
<nav>
    <a href='../../index.html'>5HT</a>
    <a href='../index.html'>TOP</a>
    <a href='#'>2018-11-13</a>
</nav>
<main>
    <section>
        <h3>KVS: Новая версия KVS 5.11</h3>
        <p>
Продолжаем выпуск новых версий SYNRC продуктов, после октябрьского ролаута всех репозиториев.
Пришло время качественно переосмыслить старые библиотеки. И начать я решил с KVS.
Как вы можете помнить, KVS — это наш слой абстрагирования над базами данных,
с точки зрения хранения всяких цепочек, от сообщений до цепочек транзакций.
Поэтому я посмотрел на то, что мы писали с Доктором, и это я вам скажу не выдерживает никакой критики.
Год назад для проекта NYNJA я обновил способ работы с цепочками, и теперь в KVS все не так,
как было в ПриватБанке, поэтому я решил продавить рефакторинг до конца и выбросить весь устаревший код.
        </p><p>
Новая облегченная версия KVS, которую я назвал KVS, точно также как и версии N2O MQTT и N2O WebSocket,
совместима по модулям со своей старшей версией. Но в будущем через несколько релизов эти разделения
сново сольются, надо лишь подождать пару циклов на продакшине. Итак, в новой, облегченной, версии KVS
отсутствуют: ротации таблиц (которые потенциально делали мнезию бесконечной базой,
способной работать в ограниченной памяти RAM); поддержка неподдерживающихся бекендов (MONGO, REDIS, RIAK),
остались только MNESIA и FS бекенды; удален старый код для работы с цепочками и переход на новый модуль STREAM.
        </p><p>
На эту новую версию KVS теперь нужно первым делом перевести приложения
BPE (система управления бизнес-процессами) и REVIEW (демонстрационное
N2O приложение работающее по протоколу MQTT).
        </p><p>
Новая семантика KVS ещё проще чем у KVS. Существую 2 вида курсоров: курсор для записи и курсор для чтения.
С помощью курсоров для записи мы добавляем данные в цепочки, а с помощью курсоров для чтения
(которые созданы с помощью курсоров для записи) мы вычитываем элементы из цепочки или скипаем их,
а также подсчитываем расстояние до краев цепочки. Возможно сюда добавится подпись цепочки а также
сплиты цепочек для поддержания не только цепочек но и деревьев.
        </p><p>
Новый сайт: <a href="https://kvs.n2o.dev">https://kvs.n2o.dev</a>
        </p>
    </section>
</main>
<footer>Namdak Tonpa <span class="heart">&nbsp;❤&nbsp;</span> 2009—2019</footer>
</body>
</html>
